# Internationalization and Localization

## Build flow

1. babel-plugin-react-intl will be triggered by babel build process,
walking through all files containing `<FormattedMessage>` components
or defineMessages helper functions to build intl files into the same folder structure in a specific folder.
2. The Gulp task `intl` will merge multiple language definition files into single file in `public/locale-data`.
3. `<IntlProvider>` will read the default language file from `public/locale-data` so that value can be read by each of the ids.
4. After all, a `default.json` file will be generated inside `public/locale-data`, and it will be ready for translation.
5. The Gulp task `upload-translation` will extend the file `default.json` (en) generated with `en.json` and then upload the translation onto oneSky.
6. The Gulp task `download-translation` will download the translation files into `public/locale-data` such as `en.json`,  `zh-hans.json`, `zh-hant`, etc.

## Example Usage

Use the higher order function as a Container in your React component directly:

It saves time and effort including both higher order functions
and transformation from react-validation-mixin and react-intl.

```javascript
import { injectJoiValidation } from 'm800-user-locale';
export default injectJoiValidation(ExampleComponent);
```

## Use FormattedMessage for static usage

```html
<FormattedMessage
  id="company.createNewCompany"
  defaultMessage="Create new company"
/>
```

## Use defineMessages for dynamic usage

```javascript
import { defineMessages, injectIntl } from 'react-intl';

const MESSAGES = defineMessages({
  username: {
    id: 'username',
    defaultMessage: 'Username',
  },
});

function ExampleComponent({ intl }) {
  const { formatMessage } = intl;

  return (
    <div>
      {formatMessage(MESSAGES.username)}
    </div>
  );
}

export default injectIntl(ExampleComponent);
```
